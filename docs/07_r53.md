# Amazon Route 53

Amazon Route 53 is AWSâ€™s highly available, scalable DNS service.  
You use it to manage **domains, DNS records, health checks, and global routing**.

You will use Route 53 with:

*   **CloudFront**
*   **API Gateway**
*   **ALB / NLB**
*   **S3 website hosting**
*   **WAF**

This is a critical component for production-grade serverless applications.

***

# ğŸ§  **SECTION 1: Route 53 Core Concepts (Simple Explanation)**

## **1. Hosted Zone**

Container for your DNS records.  
If you own `myapp.com`, your hosted zone is:

    myapp.com

***

## **2. DNS Record Types You MUST Know**

### **A Record**

Maps a domain to an IPv4 address or AWS resource.

### **AAAA Record**

IPv6 version of A Record.

### **CNAME**

Alias â†’ maps name to another domain name.

### **ALIAS (AWS ONLY)**

This is special and **free**:

*   Points to AWS resources
*   Supports root domain (CNAME does not)

Examples:

*   CloudFront distribution
*   API Gateway custom domain
*   S3 website endpoint
*   Load Balancers

***

## **3. Routing Policies**

These determine how Route 53 responds to DNS queries:

*   **Simple** â€“ basic, single record
*   **Weighted** â€“ distribute traffic by %
*   **Latency-based** â€“ send users to fastest region
*   **Failover** â€“ active/passive DR
*   **Geolocation** â€“ route based on userâ€™s country
*   **Geoproximity** â€“ route based on geography + bias
*   **Multi-value** â€“ multiple healthy endpoints

***

## **4. Health Checks**

Route 53 can monitor your endpoints and failover automatically.

***

# ------------------------------------

# ğŸ§ª \*\*SECTION 2: Handsâ€‘On Exercise #1

Register or Import a Domain and Create a Hosted Zone\*\*

### **Goal:**

Get your domain ready for AWS services.

***

## **Step 1 â€” Register a Domain (Optional)**

Route 53 â†’ Domain registration

Examples:

    myserverlessapp.com
    mylambdaapi.com
    naveen-cloud.com

***

## **Step 2 â€” Route 53 Creates a Public Hosted Zone**

Your hosted zone will include:

*   NS records
*   SOA record

Do **not delete these**.

***

## **Step 3 â€” Verify Name Servers**

If your domain is managed elsewhere (GoDaddy, Namecheap):

*   Copy NS records from Route 53
*   Paste into registrarâ€™s DNS settings

Propagation: 5â€“30 minutes

***

### ğŸ¯ **Outcome:**

Your domain is now controlled by Route 53.

***

# ------------------------------------

# ğŸ§ª \*\*SECTION 3: Handsâ€‘On Exercise #2

Map a Subdomain to API Gateway Using ALIAS Record\*\*

### **Goal:**

Expose your API at:

    api.myapp.com

***

## **Step 1 â€” Create API Gateway Custom Domain**

API Gateway â†’ Custom Domain Names â†’ Create

Domain:

    api.myapp.com

AWS will create:  
âœ” Regional domain name  
âœ” ACM TLS certificate

***

## **Step 2 â€” Create DNS Record in Route 53**

Hosted Zone â†’ Create A Record

    Record name: api
    Record type: A (Alias)
    Target: API Gateway domain target

Save.

***

## **Step 3 â€” Test**

Open:

    https://api.myapp.com

***

### ğŸ¯ **Outcome:**

Your API is now reachable via a custom domain.

***

# ------------------------------------

# ğŸ§ª \*\*SECTION 4: Handsâ€‘On Exercise #3

Point a Domain to CloudFront\*\*

This is *the most common real-world scenario*.

***

## **Step 1 â€” CloudFront â†’ Origins**

Set origin:

*   S3 bucket
*   API Gateway
*   ALB
*   Static site

***

## **Step 2 â€” Add Alternate Domain Name (CNAME)**

Example:

    www.myapp.com

***

## **Step 3 â€” Request SSL Certificate**

ACM â†’ Request certificate

Add:

    www.myapp.com
    myapp.com

***

## **Step 4 â€” Add DNS A Record**

Hosted Zone â†’ Create A Record

    Record: www
    Alias: Yes
    Target: Your CloudFront distribution

***

### ğŸ¯ **Outcome:**

Your CloudFront site is now hosted at `www.myapp.com`.

***

# ------------------------------------

# ğŸ§ª **SECTION 5: Routing Policy Examples**

These are required for global, scalable architecture.

***

## **1. Simple Routing**

Used for:

*   S3 static site
*   CloudFront
*   API Gateway

Example:

    A Record â†’ CloudFront

***

## **2. Weighted Routing**

Send 70% traffic to v1, 30% to v2.

Use cases:

*   Canary deployments
*   A/B testing

Example:

    v1.cloudfront.net (70)
    v2.cloudfront.net (30)

***

## **3. Latency-Based Routing**

Route users to lowest-latency region.

Use cases:

*   Multi-region Lambda\@Edge
*   Multi-region API Gateway failover

***

## **4. Failover Routing**

Primary â†’ Secondary

Use cases:

*   Disaster recovery
*   Multi-region high availability

Health checks required.

***

# ------------------------------------

# ğŸ§ª **SECTION 6: Create Route 53 Health Checks**

Health checks monitor:

*   API endpoints
*   Websites
*   Custom ports
*   CloudWatch alarms

***

## **Step 1 â€” Create Health Check**

Route 53 â†’ Health Checks â†’ Create

Check endpoint:

    https://api.myapp.com/health

***

## **Step 2 â€” Use Health Check in Failover Record**

Primary:

    Alias â†’ us-east-1 API Gateway
    Failover: PRIMARY
    Health check: attached

Secondary:

    Alias â†’ us-west-2 API Gateway
    Failover: SECONDARY

***

### ğŸ¯ **Outcome:**

Your API automatically fails over between regions.

***

# ------------------------------------

# ğŸ” **SECTION 7: Route 53 Best Practices (Production-Grade)**

âœ” Use **ALIAS** instead of CNAME for AWS resources  
âœ” Always use HTTPS with ACM certificates  
âœ” For SaaS apps â†’ enforce DNSSEC (if required)  
âœ” Use health checks for multi-region HA  
âœ” Use weighted routing for version deployments  
âœ” Use latency routing for global users  
âœ” Donâ€™t hardcode IPs â€” always use ALIAS targets  
âœ” Keep documentation for all DNS changes

***

# ------------------------------------

# ğŸ“ **SECTION 8: Stepâ€‘7 Final Assignment (Mini Project)**

Build a full production-ready Route 53 setup.

***

## **Requirements**

1ï¸âƒ£ Create a new hosted zone  
2ï¸âƒ£ Configure custom domain `api.myapp.com` for API Gateway  
3ï¸âƒ£ Configure `www.myapp.com` for CloudFront  
4ï¸âƒ£ Create a failover routing policy between 2 API regions  
5ï¸âƒ£ Configure health checks  
6ï¸âƒ£ Create Latency Routing for improved performance  
7ï¸âƒ£ Test DNS resolution using:

    nslookup www.myapp.com
    dig api.myapp.com

***

## **Expected Architecture**

    Route 53
       â†“
    CloudFront (www)
       â†“
    S3 website / SPA

    Route 53
       â†“
    API Gateway (api)
       â†“
    Lambda â†’ DynamoDB

***

### ğŸ¯ **End Result:**

You now fully understand Route 53 for DNS, domains, routing, and global traffic management â€” everything needed for production serverless architecture.

***
