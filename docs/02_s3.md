# Amazon S3 (Simple Storage Service)

S3 is one of the most foundational AWS services.  
You will use it with **CloudFront, Lambda, API Gateway, WAF, DynamoDB Streams, EventBridge**, and more.

***

# ğŸ§  **SECTION 1: What is S3 (Simple Explanation)**

Amazon S3 is object storage where you store files like:

*   HTML, JS, CSS (for websites)
*   Images / videos
*   Logs
*   Backups
*   Lambdas, datasets, static assets

It is:

*   infinitely scalable
*   durable (11 nines 99.999999999%)
*   serverless
*   global access capable
*   payâ€‘perâ€‘use

***

# ğŸ—‚ï¸ **SECTION 2: S3 Core Concepts You Must Master**

## **1. Buckets**

A bucket is the top-level container (like a folder, but global).

âœ” Bucket names must be globally unique  
âœ” Buckets live in one AWS region

***

## **2. Objects**

Files you upload into S3.

Each object has:

*   key (path/filename)
*   value (file content)
*   metadata
*   storage class
*   version ID (if enabled)

***

## **3. Folder Structure (Not Real Folders)**

S3 doesnâ€™t have folders.  
It uses **prefixes**:

Example key:

    website/assets/img/logo.png

***

## **4. Versioning**

Enabling versioning stores **previous versions** of objects.

Use case:

*   rollback deployments
*   prevent accidental deletion
*   maintain history

***

## **5. Storage Classes**

Most important ones:

*   **Standard** â†’ frequent access
*   **Standard-IA** â†’ infrequent access
*   **Glacier** â†’ long-term archive
*   **Intelligent Tiering** â†’ auto-optimize cost

***

## **6. Encryption**

Two main types:

*   **SSEâ€‘S3** â†’ S3 manages keys
*   **SSEâ€‘KMS** â†’ You manage encryption keys

***

## **7. S3 Event Notifications**

S3 can trigger:

*   Lambda
*   SNS
*   SQS

Example use case:

âœ” Automatically process an uploaded file  
âœ” Generate thumbnails  
âœ” Stream logs

***

## **8. Access Control**

You can secure S3 using:

*   IAM policies
*   Bucket policies
*   ACLs (mostly legacy)
*   OAC (Origin Access Control for CloudFront)

***
# SECTION 3: Handsâ€‘On Exercise #1

Create an S3 Bucket + Configure Versioning + Lifecycle Rules

### **Goal:**

Learn core skills needed for CloudFront + website hosting + backups.

***

## **Step 1 â€” Create a Bucket**

Go to:  
**S3 â†’ Create Bucket**

Name:

    my-app-storage-bucket-123

Region: Choose closest to you.

Uncheck: â€œBlock all public accessâ€ (keep it blocked).

***

## **Step 2 â€” Enable Versioning**

S3 â†’ Your bucket â†’ Properties â†’ Versioning â†’ Enable

Now every object update creates a new version.

***

## **Step 3 â€” Add Lifecycle Rule**

S3 â†’ Management â†’ Create lifecycle rule

Name:

    move-old-files-to-glacier

Rule:

*   Transition objects to Glacier after 90 days
*   Delete current versions after 365 days
*   Delete old versions after 180 days

***

### ğŸ¯ **Outcome:**

You now understand storage optimization, version history, and lifecycle automation.

***
# SECTION 4: Handsâ€‘On Exercise #2

Host a Static Website on S3\*\*

### **Goal:**

Learn how to use S3 for public website hosting (CloudFront uses this).

***

## **Step 1 â€” Upload Website Files**

Upload:

*   index.html
*   error.html

***

## **Step 2 â€” Enable Static Website Hosting**

S3 â†’ Properties â†’ Static website hosting â†’ Enable

Configure:

    Index document: index.html
    Error document: error.html

Copy the generated website endpoint.

***

## **Step 3 â€” Make files public (temporary method)**

**Do NOT do this in production.**  
This is only for learning.

### Add this bucket policy:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::my-app-storage-bucket-123/*"
    }
  ]
}
```

***

### ğŸ¯ **Outcome:**

Your website is now publicly accessible.

In production, you will use **CloudFront + OAC** instead.

***
# SECTION 5: Handsâ€‘On Exercise #3

Trigger a Lambda When a File Is Uploaded to S3\*\*

### **Goal:**

Learn event-driven workflows.

***

## **Step 1 â€” Create a Lambda Function**

Name:
\`\`process-uploaded-file

````

Runtime: Python or Node.js

Example Lambda (Node.js):
```javascript
exports.handler = async (event) => {
    console.log("New file uploaded:");
    console.log(JSON.stringify(event, null, 2));
};
````

***

## **Step 2 â€” Give Lambda S3 Permissions**

Attach policy:

    AmazonS3ReadOnlyAccess

***

## **Step 3 â€” Add S3 Trigger**

S3 â†’ Bucket â†’ Events â†’ Create event notification

Name:

    on-file-upload

Event type:

    PUT (ObjectCreated)

Destination:

    Lambda â†’ process-uploaded-file

***

### ğŸ¯ **Outcome:**

Every file upload now triggers your Lambda â€” a core pattern in serverless pipelines.

***
# ğŸ“˜ **SECTION 6: Important S3 Policies (Real Examples)**

## **1. Allow Lambda to write logs to this bucket**

```json
{
  "Effect": "Allow",
  "Action": ["s3:PutObject"],
  "Resource": "arn:aws:s3:::lambda-logs-bucket/*"
}
```

***

## **2. Deny insecure (HTTP) uploads**

```json
{
  "Effect": "Deny",
  "Principal": "*",
  "Action": "s3:*",
  "Resource": "arn:aws:s3:::mybucket/*",
  "Condition": {
    "Bool": {"aws:SecureTransport": false}
  }
}
```

***

## **3. Allow CloudFront OAC to read S3**

(For production setups)

```json
{
  "Effect": "Allow",
  "Principal": {
    "Service": "cloudfront.amazonaws.com"
  },
  "Action": "s3:GetObject",
  "Resource": "arn:aws:s3:::mybucket/*",
  "Condition": {
    "StringEquals": {
      "AWS:SourceArn": "arn:aws:cloudfront::123456789012:distribution/E123ABC456"
    }
  }
}
```

***
# ğŸ” **SECTION 7: S3 Best Practices (Developerâ€‘Focused)**

âœ” Enable versioning on all important buckets  
âœ” Use lifecycle rules to reduce storage cost  
âœ” Never make a bucket public â€” use CloudFront + OAC  
âœ” Always enable server-side encryption  
âœ” Use KMS for sensitive data  
âœ” Don't rely on â€œfoldersâ€ â€” just key prefixes  
âœ” Use S3 events to trigger automation (Lambda/SQS)  
âœ” Block public access at the account level

***
# ğŸ“ **SECTION 8: Stepâ€‘2 Final Assignment (Mini Project)**

Build a real S3â€‘based hosting + automation experience.

### **You must complete:**

1ï¸âƒ£ Create bucket â†’ enable versioning  
2ï¸âƒ£ Host a static website (temporary public)  
3ï¸âƒ£ Protect bucket using HTTPS-only policy  
4ï¸âƒ£ Set lifecycle rules  
5ï¸âƒ£ Trigger Lambda when files are uploaded

### **End Result:**

You now understand:

*   S3 storage
*   versioning
*   lifecycle management
*   hosting
*   events
*   security
*   IAM integration

***
